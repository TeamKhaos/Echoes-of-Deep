[gd_scene load_steps=24 format=3 uid="uid://c6fhcls1wqh8"]

[ext_resource type="PackedScene" uid="uid://0n2ppdjdgm7e" path="res://scenes/player/player.tscn" id="1_bc5n3"]
[ext_resource type="PackedScene" uid="uid://b73eyetc8mca0" path="res://scenes/objets/palo.tscn" id="2_4jb62"]
[ext_resource type="PackedScene" uid="uid://dho25c04rkus1" path="res://scenes/objets/comida_2.tscn" id="2_lxy4y"]
[ext_resource type="PackedScene" uid="uid://bpaicuppyrwfj" path="res://scenes/objets/antorcha.tscn" id="2_m7nr4"]
[ext_resource type="PackedScene" uid="uid://n5p1stc4i1qx" path="res://scenes/objets/botella.tscn" id="4_14w5t"]
[ext_resource type="PackedScene" uid="uid://be5kkjfpgt3sy" path="res://scenes/scenary_objects/fogata.tscn" id="5_sfnd5"]
[ext_resource type="PackedScene" uid="uid://b0o2h1nf4516m" path="res://scenes/EnemyTest.tscn" id="6_lxy4y"]
[ext_resource type="PackedScene" uid="uid://cjinoan3rfh77" path="res://scenes/scenary_cave/tunel_1.tscn" id="8_o8nxa"]
[ext_resource type="Shader" uid="uid://be8jh6fto5804" path="res://resources/materials/postprocesado.gdshader" id="9_bc5n3"]
[ext_resource type="Script" uid="uid://crh7g3k80a01s" path="res://scripts/AmbientWindControll.gd" id="10_yqmvt"]
[ext_resource type="AudioStream" uid="uid://co0tgnjj4ylil" path="res://resources/audio/viento_fuerte.mp3" id="11_2kgci"]
[ext_resource type="AudioStream" uid="uid://cxpobmpa53gue" path="res://resources/audio/viento_suave.mp3" id="12_mxmwd"]
[ext_resource type="Shader" uid="uid://8y1s3rli7syl" path="res://resources/materials/postprocesado2.gdshader" id="13_dua2e"]
[ext_resource type="Script" path="res://scripts/ItemAudioController.gd" id="13_mxmwd"]
[ext_resource type="AudioStream" uid="uid://5vwrnvf2jbq3" path="res://resources/audio/pickup.mp3" id="14_34t2b"]
[ext_resource type="AudioStream" uid="uid://ctx14oknswvxe" path="res://resources/audio/drop.mp3" id="15_dua2e"]
[ext_resource type="AudioStream" uid="uid://bow4dpbp62fiq" path="res://resources/audio/comer.mp3" id="16_vh305"]

[sub_resource type="BoxShape3D" id="BoxShape3D_ij1v8"]
size = Vector3(20, 0.5, 20)

[sub_resource type="BoxMesh" id="BoxMesh_ij1v8"]
size = Vector3(20, 0.5, 20)

[sub_resource type="SphereShape3D" id="SphereShape3D_bc5n3"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yqmvt"]
render_priority = 0
shader = ExtResource("9_bc5n3")
shader_parameter/color_profundidad = 16.0
shader_parameter/dither_amount = 0.5
shader_parameter/brightness_threshold = 1.2
shader_parameter/preserve_bright_pixels = true
shader_parameter/shadow_brightness = 0.15
shader_parameter/outline_thickness = 2.0
shader_parameter/outline_threshold = 0.05
shader_parameter/outline_color = Color(1, 1, 1, 1)
shader_parameter/outline_intensity = 1.5
shader_parameter/use_depth_outline = true
shader_parameter/use_normal_outline = true
shader_parameter/depth_sensitivity = 40.0
shader_parameter/sonar_mode = false

[sub_resource type="QuadMesh" id="QuadMesh_o8nxa"]
flip_faces = true
size = Vector2(2, 2)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dua2e"]
render_priority = 0
shader = ExtResource("13_dua2e")
shader_parameter/dither_amount = 0.5
shader_parameter/edge_threshold = 0.1
shader_parameter/edge_softness = 0.3
shader_parameter/brightness_threshold = 1.2
shader_parameter/use_edge_detection = true
shader_parameter/preserve_bright_pixels = true

[node name="Plataforma" type="Node3D"]

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("BoxShape3D_ij1v8")

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, -1.4901161e-08, 0, 1.4901161e-08, 1, 0, 0, 0, 1, 0.14665428, -0.00046317466, -0.057216644)
mesh = SubResource("BoxMesh_ij1v8")

[node name="Player" parent="." instance=ExtResource("1_bc5n3")]
transform = Transform3D(0.009354769, 0, -0.99995625, 0, 1, 0, 0.99995625, 0, 0.009354769, 0, 0.8527156, 5.840806)

[node name="ItemAudioController" type="Node3D" parent="Player"]
transform = Transform3D(0.009354769, 0, 0.99995625, 0, 1, 0, -0.99995625, 0, 0.009354769, -5.8405504, -0.8527156, -0.05463939)
script = ExtResource("13_mxmwd")
volume = 1.0

[node name="PickupSound" type="AudioStreamPlayer3D" parent="Player/ItemAudioController"]
stream = ExtResource("14_34t2b")

[node name="DropSound" type="AudioStreamPlayer3D" parent="Player/ItemAudioController"]
stream = ExtResource("15_dua2e")

[node name="EatSound" type="AudioStreamPlayer3D" parent="Player/ItemAudioController"]
stream = ExtResource("16_vh305")

[node name="DrinkSound" type="AudioStreamPlayer3D" parent="Player/ItemAudioController"]

[node name="Area3D" type="Area3D" parent="." groups=["reverb_zone"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.35051894, -6.5081606)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 0, 0, 0)
shape = SubResource("SphereShape3D_bc5n3")

[node name="fogata" parent="." instance=ExtResource("5_sfnd5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.0296555, 0.86422074, 0)

[node name="EnemyTest" parent="." instance=ExtResource("6_lxy4y")]
transform = Transform3D(1, 0, 0, 0, 0.98556197, 0.1693151, 0, -0.1693151, 0.98556197, -8.094083, 1.5874519, -8.729082)

[node name="Objetos" type="Node" parent="."]

[node name="Antorcha" parent="Objetos" groups=["interactable"] instance=ExtResource("2_m7nr4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.6971633, 0)

[node name="Agua2" parent="Objetos" instance=ExtResource("4_14w5t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.094047666, 1.6902466, 0.6015465)

[node name="Agua" parent="Objetos" instance=ExtResource("4_14w5t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.9869989, 1.6902466, 0.6015465)

[node name="Palo" parent="Objetos" instance=ExtResource("2_4jb62")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 1.0716718, 1.621802, 0)

[node name="Comida2" parent="Objetos" groups=["interactable"] instance=ExtResource("2_lxy4y")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.35051894, -6.5081606)

[node name="Tunel1" parent="." instance=ExtResource("8_o8nxa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.936312, 2.975579, -0.4726367)

[node name="Sonar" type="MeshInstance3D" parent="."]
visible = false
material_override = SubResource("ShaderMaterial_yqmvt")
extra_cull_margin = 16384.0
mesh = SubResource("QuadMesh_o8nxa")

[node name="Sonar2" type="MeshInstance3D" parent="."]
material_override = SubResource("ShaderMaterial_dua2e")
extra_cull_margin = 16384.0
mesh = SubResource("QuadMesh_o8nxa")

[node name="AmbientWindController" type="Node3D" parent="." node_paths=PackedStringArray("player")]
script = ExtResource("10_yqmvt")
player = NodePath("../Player")

[node name="WindStrong" type="AudioStreamPlayer3D" parent="AmbientWindController"]
stream = ExtResource("11_2kgci")
max_distance = 50.0

[node name="WindSoft" type="AudioStreamPlayer3D" parent="AmbientWindController"]
stream = ExtResource("12_mxmwd")
max_distance = 50.0
